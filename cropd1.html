<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>STRIVERS | Crop Disease Detection</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  <link rel="stylesheet" href="/cropd.css">
  <script src="/dark.js"></script>

  <style>
    #language-selector {
      padding: 6px 10px;
      font-size: 0.9rem;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-900">

  <!-- üåø Navbar -->
  <nav class="navbar flex justify-between items-center px-6 py-4 shadow-md sticky top-0 z-50 bg-white">
    <div class="logo-container flex items-center gap-4">
      <img src="/updated_logo-removebg-preview.png" alt="Logo" class="logo w-32 h-auto" />
      
      <!-- üåê Language Selector -->
      <select id="language-selector">
        <option value="en">English</option>
        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
        <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
      </select>
    </div>

    <div class="nav-buttons flex items-center gap-4">
      <button id="theme-toggle" class="nav-btn theme-toggle text-xl">üåô</button>
      <a href="index.html" class="nav-btn" data-translate="pre_ai">Pre AI</a>
      <a href="cropd.html" class="nav-btn" data-translate="post_ai">Post AI</a>
      <a href="/recomendation.html" class="nav-btn" data-translate="recommendation">Recommendation</a>

      <div class="relative">
        <span id="moreText" class="nav-btn cursor-pointer" data-translate="more">More ‚åÑ</span>
        <div id="moreDropdown" class="fixed hidden bg-white shadow-md rounded-md py-2 w-40 z-50" style="top: 64px; right: 1.5rem;">
          <a href="/marketprice.html" class="nav-btn block px-4 py-2 hover:text-[#00ffc3]" data-translate="market_price">Market Price</a>
          <a href="#" class="nav-btn block px-4 py-2 hover:text-[#00ffc3]" data-translate="option2">Option 2</a>
          <a href="#" class="nav-btn block px-4 py-2 hover:text-[#00ffc3]" data-translate="option3">Option 3</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Dropdown logic -->
  <script>
    const moreText = document.getElementById("moreText");
    const moreDropdown = document.getElementById("moreDropdown");

    moreText.addEventListener("click", () => {
      moreDropdown.classList.toggle("hidden");
    });

    document.addEventListener("click", (e) => {
      if (!moreText.contains(e.target) && !moreDropdown.contains(e.target)) {
        moreDropdown.classList.add("hidden");
      }
    });
  </script>

  <!-- üîç Main Content -->
  <main class="flex flex-wrap p-6 lg:p-10 gap-8">

    <!-- Left Section -->
    <section class="flex-1 min-w-[300px]">
      <h2 class="text-2xl font-semibold mb-4" data-translate="upload_image">Upload Image</h2>

      <div class="mb-6">
        <label class="block font-medium mb-2" data-translate="upload_device">Upload from device üì§:</label>
        <input type="file" id="fileInput" accept="image/*" class="border border-gray-300 p-2 rounded w-full bg-white" />
      </div>

      <div class="mb-6">
        <label class="block font-medium mb-2" data-translate="capture_camera">Capture from camera:</label>
        <div class="camera-controls flex items-center gap-4 flex-wrap">
          <button id="openCameraBtn" class="bg-green-100 text-green-800 font-semibold py-2 px-4 rounded-lg border border-green-400 hover:bg-green-200 flex items-center gap-2 transition" data-translate="open_camera">
            üì∑ Open Camera
          </button>
          <button id="captureBtn" class="bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700 flex items-center gap-2 transition hidden" data-translate="capture">
            üì∏ Capture
          </button>
        </div>
      </div>

      <video id="liveCamera" class="mt-4 w-full rounded hidden shadow-md" autoplay playsinline></video>

      <div class="mb-6">
        <label class="block font-medium mb-2" data-translate="paste_image">Paste image here:</label>
        <div id="pasteBox" contenteditable="true" class="border border-gray-300 rounded p-4 h-32 bg-white overflow-auto">
          <p class="text-sm text-gray-500" data-translate="paste_here">Paste an image directly into this box...</p>
        </div>
      </div>

      <div class="mt-4 w-1/3 mx-auto">
        <button id="predictBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition" data-translate="predict">üîç Predict</button>
      </div>
    </section>

    <!-- Right Section -->
    <section class="flex-1 min-w-[300px]">
      <h2 class="text-2xl font-semibold mb-4" data-translate="output">AI/ML Prediction Output</h2>
      <img id="preview" class="mt-4 w-full max-w-[500px] max-h-[400px] rounded shadow-md hidden" alt="Image Preview" />
      <div id="predictionOutput" class="w-full min-h-[250px] border-2 border-green-500 p-4 rounded bg-white text-black mt-4"></div>
    </section>

  </main>

  <script defer src="/cropd.js"></script>

  <!-- üî§ Translation Script -->
  <script>
    const translations = {
      en: {
        pre_ai: "Pre AI",
        post_ai: "Post AI",
        recommendation: "Recommendation",
        more: "More ‚åÑ",
        market_price: "Market Price",
        option2: "Option 2",
        option3: "Option 3",
        upload_image: "Upload Image",
        upload_device: "Upload from device üì§:",
        capture_camera: "Capture from camera:",
        open_camera: "Open Camera",
        capture: "Capture",
        paste_image: "Paste image here:",
        paste_here: "Paste an image directly into this box...",
        predict: "üîç Predict",
        output: "AI/ML Prediction Output"
      },
      hi: {
        pre_ai: "‡§™‡•Ç‡§∞‡•ç‡§µ AI",
        post_ai: "‡§¨‡§æ‡§¶ AI",
        recommendation: "‡§∏‡§ø‡§´‡§æ‡§∞‡§ø‡§∂",
        more: "‡§Ö‡§ß‡§ø‡§ï ‚åÑ",
        market_price: "‡§¨‡§æ‡§ú‡§º‡§æ‡§∞ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø",
        option2: "‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ 2",
        option3: "‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ 3",
        upload_image: "‡§õ‡§µ‡§ø ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
        upload_device: "‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§∏‡•á ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç üì§:",
        capture_camera: "‡§ï‡•à‡§Æ‡§∞‡•á ‡§∏‡•á ‡§ï‡•à‡§™‡•ç‡§ö‡§∞ ‡§ï‡§∞‡•á‡§Ç:",
        open_camera: "‡§ï‡•à‡§Æ‡§∞‡§æ ‡§ñ‡•ã‡§≤‡•á‡§Ç",
        capture: "‡§ï‡•à‡§™‡•ç‡§ö‡§∞ ‡§ï‡§∞‡•á‡§Ç",
        paste_image: "‡§Ø‡§π‡§æ‡§Å ‡§õ‡§µ‡§ø ‡§ö‡§ø‡§™‡§ï‡§æ‡§è‡§Ç:",
        paste_here: "‡§∏‡•Ä‡§ß‡•á ‡§á‡§∏ ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§õ‡§µ‡§ø ‡§ö‡§ø‡§™‡§ï‡§æ‡§è‡§Ç...",
        predict: "üîç ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‡§µ‡§æ‡§£‡•Ä ‡§ï‡§∞‡•á‡§Ç",
        output: "AI/ML ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ"
      },
      te: {
        pre_ai: "AI ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å",
        post_ai: "AI ‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§",
        recommendation: "‡∞∏‡∞ø‡∞´‡∞æ‡∞∞‡±ç‡∞∏‡±Å",
        more: "‡∞Æ‡∞∞‡∞ø‡∞®‡±ç‡∞®‡∞ø ‚åÑ",
        market_price: "‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç ‡∞ß‡∞∞",
        option2: "‡∞é‡∞Ç‡∞™‡∞ø‡∞ï 2",
        option3: "‡∞é‡∞Ç‡∞™‡∞ø‡∞ï 3",
        upload_image: "‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞Ö‡∞™‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
        upload_device: "‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞Ç ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞Ö‡∞™‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø üì§:",
        capture_camera: "‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞ï‡±ç‡∞Ø‡∞æ‡∞™‡±ç‡∞ö‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø:",
        open_camera: "‡∞ï‡±Ü‡∞Æ‡±Ü‡∞∞‡∞æ ‡∞§‡±Ü‡∞∞‡∞µ‡∞Ç‡∞°‡∞ø",
        capture: "‡∞ï‡±ç‡∞Ø‡∞æ‡∞™‡±ç‡∞ö‡∞∞‡±ç",
        paste_image: "‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞á‡∞ï‡±ç‡∞ï‡∞° ‡∞Ö‡∞Ç‡∞ü‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø:",
        paste_here: "‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞®‡±á‡∞∞‡±Å‡∞ó‡∞æ ‡∞à ‡∞¨‡∞æ‡∞ï‡±ç‡∞∏‡±ç‚Äå‡∞≤‡±ã ‡∞™‡±á‡∞∏‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø...",
        predict: "üîç ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
        output: "AI/ML ‡∞Ö‡∞Ç‡∞ö‡∞®‡∞æ ‡∞´‡∞≤‡∞ø‡∞§‡∞æ‡∞≤‡±Å"
      }
    };

    const selector = document.getElementById("language-selector");

    function translatePage(lang) {
      document.querySelectorAll("[data-translate]").forEach(el => {
        const key = el.getAttribute("data-translate");
        if (translations[lang] && translations[lang][key]) {
          el.textContent = translations[lang][key];
        }
      });
    }

    selector.addEventListener("change", (e) => {
      const lang = e.target.value;
      translatePage(lang);
    });

    // Default language
    translatePage("en");
  </script>

</body>
</html>
